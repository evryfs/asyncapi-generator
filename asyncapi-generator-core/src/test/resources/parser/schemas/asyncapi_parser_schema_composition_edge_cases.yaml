asyncapi: 3.0.0
info:
  title: Composition Edge Cases
  version: 1.0.0
components:
  schemas:
    # Case 1: Recursive Composition (allOf inside oneOf)
    RecursiveComposition:
      oneOf:
        - allOf:
            - type: object
              properties:
                nestedProp:
                  type: string
            - $ref: '#/components/schemas/SimpleString'
        - type: integer

    # Case 2: Mixed References and Inline
    MixedComposition:
      anyOf:
        - $ref: '#/components/schemas/SimpleString'
        - type: boolean
          description: Inline boolean schema

    # Case 3: Empty Composition (valid JSON Schema)
    EmptyAllOf:
      allOf: []

    # Case 4: Untyped Composition (implicit type inference later)
    UntypedOneOf:
      oneOf:
        - type: string
        - type: integer

    SimpleString:
      type: string
